// Copyright 2016 The Chromium Authors. All rights reserved.
// Use of this source code is governed by a BSD-style license that can be
// found in the LICENSE file.

module modular.testing;

// This service is included in the ApplicationEnvironment of multi-process tests
// that are launched by the test runner harness. Test processes can connect to
// this service to log failures, signal crashes, and signal completion.
[ServiceName="modular.testing.TestRunner"]
interface TestRunner {
  // Tells the test runner that a particular test case failed, with the supplied
  // message. May be called multiple times. When |Teardown()| is called, the
  // test ends as a failure.
  Fail(string log_message);

  // Either this method or Teardown() must be invoked before closing the
  // connection to this interface; otherwise the TestRunner service will
  // assume that the connection broke due to the test crashing.
  Done();

  // Signals that the test is complete and the entire test harness should torn
  // down. The test will be declared a failure if Fail() was ever called.
  // Otherwise the test will be declared successful.
  Teardown();
};

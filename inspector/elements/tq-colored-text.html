<!-- Copyright 2016 The Fuchsia Authors. All rights reserved. -->

<dom-module id="tq-colored-text">
  <template>
    <style include="shared-styles">
      :host {
        display: inline;
      }
    </style>
    <content></content>
  </template>
  <script>
    (function() {
      'use strict';

      function hashCode(s) {
        var hash = 0, i, chr, len;
        if (s.length === 0) return hash;
        for (i = 0, len = s.length; i < len; i++) {
          chr   = s.charCodeAt(i);
          hash  = ((hash << 5) - hash) + chr;
          hash |= 0; // Convert to 32bit integer
        }
        return hash;
      }


      Polymer({
        is: 'tq-colored-text',
        ready: function() {
          Polymer.dom(this.$.contentNode).observeNodes((info) => {
            let value = Math.floor(hashCode(this.innerText) % 360);
            this.style.color = `hsl(${value}, 100%, 30%)`
          });
        },
      });
    })();
  </script>
</dom-module>
